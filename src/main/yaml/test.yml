incarnation: protelis

variables:
  width: &width
    type: Constant
    parameters: 50
  height: &height
    type: Constant
    parameters: 50
  moleculeName: &moleculeName pheromone
  neighborhoodDistance: &distance 0.1

network-model:
  type: ConnectWithinDistance
  parameters:
    - *distance

environment:
  type: Continuous2DEnvironment
  global-programs:
  - time-distribution:
      type: DiracComb
      parameters: [0, 0.01]
    type: Deposit
    parameters: [*moleculeName]
  - time-distribution:
      type: DiracComb
      parameters: [0, 0.01]
    type: Evaporate
    parameters: [*moleculeName]
  - time-distribution:
      type: DiracComb
      parameters: [0, 0.01]
    type: Diffuse
    parameters: [*moleculeName, 5.0, *distance]



seeds:
  scenario: 0
  simulation: 1

_actions:
  all: &read
    - type: Event
      time-distribution: 1
      actions:
        - type: MoveNode
          parameters: [*distance, *moleculeName]
        - type: ReadLayer
          parameters:



deployments:
  type: Rectangle
  parameters: [20, 0, 0, 1, 1]
  properties:
    - type: NodeWithDirection
  contents:
    molecule: *moleculeName
    concentration: 10
  programs:
    - *read


layers:
  - type: PheromoneLayer
    parameters: [*moleculeName]
    molecule: *moleculeName
  #- type: NonConvexLayer
  #  parameters: [0.0, 0, 0, 5, 5]
  #  molecule: pheromone

terminate:
  - type: AfterTime
    parameters: 2000